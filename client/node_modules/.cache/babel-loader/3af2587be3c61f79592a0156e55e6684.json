{"ast":null,"code":"import React from\"react\";import{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import useEth from\"../contexts/EthContext/useEth\";import ElectionCard from\"../components/ElectionCard\";import Backdrop from\"@mui/material/Backdrop\";import Box from\"@mui/material/Box\";import Button from\"@mui/material/Button\";import CircularProgress from\"@mui/material/CircularProgress\";import Grid from\"@mui/material/Grid\";import Stack from\"@mui/material/Stack\";import Typography from\"@mui/material/Typography\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function HomeScreen(_ref){let{color=\"primary\"}=_ref;const{state:{contract,accounts}}=useEth();const[elections,setElections]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const getElections=async()=>{if(contract){const elections=await contract.methods.getElections().call({from:accounts[0]});setElections(elections);setLoading(false);}};getElections();},[contract,accounts]);return/*#__PURE__*/_jsx(Box,{children:loading?/*#__PURE__*/_jsx(\"div\",{style:{margin:100,textAlign:\"center\"},children:/*#__PURE__*/_jsx(Backdrop,{open:true,sx:{color:\"#fff\",zIndex:theme=>theme.zIndex.drawer+1},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\"}),/*#__PURE__*/_jsx(\"br\",{}),!contract&&/*#__PURE__*/_jsx(\"p\",{children:\"Please ensure that metamask is unlocked and Polygon's Mumbai testnet is selected...\"})]})})}):/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Stack,{marginTop:5,direction:\"row\",justifyContent:\"space-between\",alignItems:\"center\",spacing:3,children:[/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",sx:{color:theme=>theme.palette[color].darker},children:[\" \",\"All Elections\"]})}),/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Link,{to:\"/elections/new/\",style:{textDecoration:\"none\"},children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",size:\"large\",children:\"Add Election\"})})})]}),elections.length===0&&/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",height:\"70vh\",color:theme=>theme.palette[color].darker},children:\"There are no elections to display right now.\"}),elections.length>0&&/*#__PURE__*/_jsx(Grid,{container:true,my:4,spacing:2,mb:4,children:elections.map((election,index)=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:6,lg:6,xl:6,children:/*#__PURE__*/_jsx(ElectionCard,{id:index,title:election})},index))})]})});}export default HomeScreen;","map":{"version":3,"names":["React","useState","useEffect","Link","useEth","ElectionCard","Backdrop","Box","Button","CircularProgress","Grid","Stack","Typography","jsx","_jsx","jsxs","_jsxs","HomeScreen","_ref","color","state","contract","accounts","elections","setElections","loading","setLoading","getElections","methods","call","from","children","style","margin","textAlign","open","sx","zIndex","theme","drawer","marginTop","direction","justifyContent","alignItems","spacing","variant","palette","darker","to","textDecoration","size","length","display","height","container","my","mb","map","election","index","item","xs","sm","md","lg","xl","id","title"],"sources":["C:/Users/HongYaeJIn/Desktop/yaejin/과제/2023/web2/blockvote-polygon-hackathon/client/src/screens/HomeScreen.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport useEth from \"../contexts/EthContext/useEth\";\r\nimport ElectionCard from \"../components/ElectionCard\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport Backdrop from \"@mui/material/Backdrop\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Button from \"@mui/material/Button\";\r\nimport CircularProgress from \"@mui/material/CircularProgress\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Stack from \"@mui/material/Stack\";\r\nimport Typography from \"@mui/material/Typography\";\r\n\r\nHomeScreen.propTypes = {\r\n\tcolor: PropTypes.string,\r\n};\r\n\r\nfunction HomeScreen({ color = \"primary\" }) {\r\n\tconst {\r\n\t\tstate: { contract, accounts },\r\n\t} = useEth();\r\n\tconst [elections, setElections] = useState([]);\r\n\tconst [loading, setLoading] = useState(true);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst getElections = async () => {\r\n\t\t\tif (contract) {\r\n\t\t\t\tconst elections = await contract.methods\r\n\t\t\t\t\t.getElections()\r\n\t\t\t\t\t.call({ from: accounts[0] });\r\n\t\t\t\tsetElections(elections);\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t};\r\n\t\tgetElections();\r\n\t}, [contract, accounts]);\r\n\r\n\treturn (\r\n\t\t<Box>\r\n\t\t\t{loading ? (\r\n\t\t\t\t<div style={{ margin: 100, textAlign: \"center\" }}>\r\n\t\t\t\t\t<Backdrop\r\n\t\t\t\t\t\topen={true}\r\n\t\t\t\t\t\tsx={{\r\n\t\t\t\t\t\t\tcolor: \"#fff\",\r\n\t\t\t\t\t\t\tzIndex: (theme) => theme.zIndex.drawer + 1,\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t<CircularProgress color=\"inherit\" />\r\n\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t{!contract && (\r\n\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\tPlease ensure that metamask is unlocked and\r\n\t\t\t\t\t\t\t\t\tPolygon's Mumbai testnet is selected...\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Backdrop>\r\n\t\t\t\t</div>\r\n\t\t\t) : (\r\n\t\t\t\t<Box>\r\n\t\t\t\t\t<Stack\r\n\t\t\t\t\t\tmarginTop={5}\r\n\t\t\t\t\t\tdirection=\"row\"\r\n\t\t\t\t\t\tjustifyContent=\"space-between\"\r\n\t\t\t\t\t\talignItems=\"center\"\r\n\t\t\t\t\t\tspacing={3}>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\tvariant=\"h4\"\r\n\t\t\t\t\t\t\t\tsx={{\r\n\t\t\t\t\t\t\t\t\tcolor: (theme) =>\r\n\t\t\t\t\t\t\t\t\t\ttheme.palette[color].darker,\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t\t\tAll Elections\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\tto=\"/elections/new/\"\r\n\t\t\t\t\t\t\t\tstyle={{ textDecoration: \"none\" }}>\r\n\t\t\t\t\t\t\t\t<Button variant=\"contained\" size=\"large\">\r\n\t\t\t\t\t\t\t\t\tAdd Election\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Stack>\r\n\r\n\t\t\t\t\t{elections.length === 0 && (\r\n\t\t\t\t\t\t<Box\r\n\t\t\t\t\t\t\tsx={{\r\n\t\t\t\t\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\t\t\t\t\tjustifyContent: \"center\",\r\n\t\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t\t\theight: \"70vh\",\r\n\t\t\t\t\t\t\t\tcolor: (theme) => theme.palette[color].darker,\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\tThere are no elections to display right now.\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{elections.length > 0 && (\r\n\t\t\t\t\t\t<Grid container my={4} spacing={2} mb={4}>\r\n\t\t\t\t\t\t\t{elections.map((election, index) => (\r\n\t\t\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t\t\t\txs={12}\r\n\t\t\t\t\t\t\t\t\tsm={6}\r\n\t\t\t\t\t\t\t\t\tmd={6}\r\n\t\t\t\t\t\t\t\t\tlg={6}\r\n\t\t\t\t\t\t\t\t\txl={6}>\r\n\t\t\t\t\t\t\t\t\t<ElectionCard id={index} title={election} />\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Box>\r\n\t\t\t)}\r\n\t\t</Box>\r\n\t);\r\n}\r\n\r\nexport default HomeScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}